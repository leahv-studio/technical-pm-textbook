<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learning Graph Color Test - 17 Pastel Colors</title>
    <script type="text/javascript" src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0px;
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
        }
        h1 {
            text-align: center;
            font-size: 1.5rem;
            margin: 5px 0;
            padding: 0;
        }
        p {
            text-align: center;
            margin: 3px 0 0px 0;
            padding: 0;
        }
        #mynetwork {
            width: 100%;
            height: 600px;
            border: 2px solid #333;
            background-color: white;
        }
        #legend {
            margin-top: 20px;
            padding: 15px;
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        #legend h3 {
            margin-top: 0;
        }
        .legend-item {
            display: inline-block;
            margin: 5px 10px;
            padding: 5px 10px;
            border-radius: 3px;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <h1>Learning Graph Color Test</h1>
    <p>Testing 17 pastel colors with 50 nodes distributed across groups. Can you differentiate the nodes by color?</p>

    <div id="mynetwork"></div>

    <div id="legend">
        <div id="legend-items"></div>
    </div>

    <script type="text/javascript">
        // Define the 17 pastel color groups
        const colorGroups = {
            '1': { name: 'Group 1', color: 'MistyRose' },
            '2': { name: 'Group 2', color: 'PeachPuff' },
            '3': { name: 'Group 3', color: 'LightYellow' },
            '4': { name: 'Group 4', color: 'Honeydew' },
            '5': { name: 'Group 5', color: 'PaleTurquoise' },
            '6': { name: 'Group 6', color: 'AliceBlue' },
            '7': { name: 'Group 7', color: 'Lavender' },
            '8': { name: 'Group 8', color: 'LavenderBlush' },
            '9': { name: 'Group 9', color: 'Thistle' },
            '10': { name: 'Group 10', color: 'MintCream' },
            '11': { name: 'Group 11', color: 'LightCoral' },
            '12': { name: 'Group 12', color: 'Plum' },
            '13': { name: 'Group 13', color: 'Gainsboro' },
            '14': { name: 'Group 14', color: 'PowderBlue' },
            '15': { name: 'Group 15', color: 'PaleGreen' },
            '16': { name: 'Group 16', color: 'Aquamarine' },
            '17': { name: 'Group 17', color: 'LightPink' }
        };

        // Generate 50 nodes distributed across 17 groups
        const nodes = [];
        for (let i = 1; i <= 50; i++) {
            // Distribute nodes across groups (roughly evenly)
            const groupId = String(((i - 1) % 17) + 1);
            nodes.push({
                id: i,
                label: `${i}\nG${groupId}`,
                group: groupId,
                shape: 'ellipse',
                font: { color: 'black', size: 14 }
            });
        }

        // Generate random edges (1-3 connections per node)
        const edges = [];
        const edgeSet = new Set(); // To avoid duplicate edges

        for (let i = 1; i <= 50; i++) {
            // Random number of connections (1-3)
            const numConnections = Math.floor(Math.random() * 3) + 1;

            for (let j = 0; j < numConnections; j++) {
                // Random target node (avoid self-loops)
                let target;
                do {
                    target = Math.floor(Math.random() * 50) + 1;
                } while (target === i);

                // Create edge key (sorted to avoid duplicates like 1->2 and 2->1)
                const edgeKey = [Math.min(i, target), Math.max(i, target)].join('-');

                if (!edgeSet.has(edgeKey)) {
                    edgeSet.add(edgeKey);
                    edges.push({
                        from: i,
                        to: target,
                        color: { color: 'black' },
                        width: 1
                    });
                }
            }
        }

        // Create vis-network data
        const data = {
            nodes: new vis.DataSet(nodes),
            edges: new vis.DataSet(edges)
        };

        // Configure vis-network options
        const options = {
            groups: {},
            nodes: {
                shape: 'ellipse',
                size: 25,
                font: {
                    size: 14,
                    color: 'black'
                },
                borderWidth: 2,
                borderWidthSelected: 3
            },
            edges: {
                color: {
                    color: 'black',
                    highlight: '#333',
                    hover: '#666'
                },
                width: 1,
                smooth: {
                    type: 'continuous'
                }
            },
            physics: {
                stabilization: {
                    iterations: 200
                },
                barnesHut: {
                    gravitationalConstant: -2000,
                    centralGravity: 0.3,
                    springLength: 95,
                    springConstant: 0.04
                }
            },
            interaction: {
                hover: true,
                tooltipDelay: 100
            }
        };

        // Configure groups with colors
        for (const [groupId, groupInfo] of Object.entries(colorGroups)) {
            // Determine font color (white for darker colors)
            const darkColors = ['Plum', 'LightCoral'];
            const fontColor = darkColors.includes(groupInfo.color) ? 'white' : 'black';

            options.groups[groupId] = {
                color: {
                    background: groupInfo.color,
                    border: '#666',
                    highlight: {
                        background: groupInfo.color,
                        border: '#000'
                    }
                },
                font: {
                    color: fontColor
                }
            };
        }

        // Create the network
        const container = document.getElementById('mynetwork');
        const network = new vis.Network(container, data, options);

        // Generate legend
        const legendContainer = document.getElementById('legend-items');
        for (const [groupId, groupInfo] of Object.entries(colorGroups)) {
            const darkColors = ['Plum', 'LightCoral'];
            const fontColor = darkColors.includes(groupInfo.color) ? 'white' : 'black';

            const legendItem = document.createElement('span');
            legendItem.className = 'legend-item';
            legendItem.style.backgroundColor = groupInfo.color;
            legendItem.style.color = fontColor;
            legendItem.style.border = '1px solid #666';
            legendItem.textContent = `${groupId}: ${groupInfo.color}`;
            legendContainer.appendChild(legendItem);
        }

        // Log statistics
        console.log(`Created network with ${nodes.length} nodes and ${edges.length} edges`);
        console.log(`Average connections per node: ${(edges.length * 2 / nodes.length).toFixed(2)}`);
    </script>
</body>
</html>
